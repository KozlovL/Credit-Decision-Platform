### Правила скоринга (REPEATER):

- Немедленные отказы:
  - Возраст < 21.
  - Если последний кредит взят более 6 месяцев назад и до сих пор не закрыт.
- Баллы (история):
  - "Возраст" истории: первый кредит > 1 года назад → +3.
  - Сумма последнего кредита: > 100 000 → +3; 50 000–100 000 → +2; < 50 000 → +1.
- Баллы (профиль — как в PIONEER, но без мгновенных отказов, кроме возраста):
  - Возраст: 21–25 → +1; 26–40 → +3; > 40 → +2.
  - Доход (в месяц): 10 000–29 999 → +1; 30 000–49 999 → +2; ≥ 50 000 → +3.
  - Тип занятости: freelance → +1; full_time → +3.
  - Недвижимость: true → +2.
- Соответствие сумме баллов продуктам REPEATER:
  - 0–5 → ничего не одобрено
  - 6–7 → LoyaltyLoan
  - 8–9 → AdvantagePlus
  - ≥ 10 → PrimeCredit
- Выбор финального продукта: из переданных в запросе — самый «лучший», на который хватает баллов; иначе — отказ.

### Валидация и поведение:

- Телефон: начинается с `7` и далее 10 цифр (пример: `79123456789`), без `+`.
- Вход `POST /api/scoring/repeater`:
  - Параметры: `{ "phone": "7XXXXXXXXXX", "products": [...] }`.
  - Если пользователь не найден в локальном хранилище — 404.
  - При нарушении схемы — 422.
  - Успех (accepted): `decision = "accepted"`, возвращается выбранный продукт; запись добавляется в историю.
  - Отказ (rejected): `decision = "rejected"`, `product = null`.

### Тестирование:

- Unit (`scoring-service`):
  - Немедленные отказы: открытый кредит; «просрочка»; возраст < 21.
  - Баллы истории (давность, сумма последнего кредита).
  - Баллы профиля (границы 25/26, 29999/30000, 49999/50000).
  - Выбор лучшего продукта из переданных согласно уровню.
  - Сохранение записи истории при accepted.
  - Поведение при отсутствии пользователя (ошибка).
- Integration (`scoring-service`):
  - accepted/rejected сценарии; 404 когда пользователя нет; 422 при неверном телефоне.
- `flow-selection-service`:
  - Интеграционный тест: для REPEATER возвращается не пустой список продуктов.